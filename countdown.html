<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Countdown Timer</title>
  </head>
  <body>
    <h1>Countdown Timer</h1>
    <div id="countdown-container">
      <label for="countdown-input">Countdown Date and Time:</label>
      <input type="datetime-local" id="countdown-input" />
      <button id="start-countdown-btn">Start Countdown</button>
    </div>
    <div id="countdown"></div>

    <script>
      const getElement = (id) => document.getElementById(id);
      const hideElement = (element) => (element.style.display = "none");
      const showElement = (element) => (element.style.display = "block");
      const setElementText = (element, text) => (element.textContent = text);

      getElement("start-countdown-btn").addEventListener(
        "click",
        startCountdown
      );

      function startCountdown() {
        const { countdownContainer, countdownInput } = getElementIds(
          "countdown-container",
          "countdown-input"
        );

        const countdownDate = new Date(countdownInput.value).getTime();
        if (isNaN(countdownDate) || countdownDate <= Date.now()) {
          alert("Invalid date and time");
          return;
        }

        hideElement(countdownContainer);
        showCountdown();

        const countdown = setInterval(() => {
          showCountdown();

          if (countdownDate <= Date.now()) {
            clearInterval(countdown);
            setElementText(getElement("countdown"), "Countdown Complete!");
            showElement(countdownContainer);
            setTimeout(() => setElementText(getElement("countdown"), ""), 3000);
          }
        }, 1000);
      }

      function showCountdown() {
        const countdownDate = new Date(
          getElement("countdown-input").value
        ).getTime();
        const currentTime = Date.now();
        let timeRemaining = (countdownDate - currentTime) / 1000;

        const [days, hours, minutes, seconds] = [
          Math.floor(timeRemaining / 86400),
          Math.floor((timeRemaining % 86400) / 3600),
          Math.floor((timeRemaining % 3600) / 60),
          Math.ceil(timeRemaining % 60),
        ];

        setElementText(
          getElement("countdown"),
          `${days}d ${hours}h ${minutes}m ${seconds}s`
        );
      }
    </script>
  </body>
</html>
